{"date":"2024-05-25T07:46:46.182Z","courseId":"17","assignment":"AP-Spring03-CA6","trace":{"content":"#include \"University.hpp\"\n#include \"Primary.hpp\"\n\nUniversity::University() {\n    user = nullptr;\n    people.push_back(new UTAccount(ZERO_STRING, UT_ACCOUNT));\n    for(int i = 0; i + 1 < people.size(); i++) {\n        people[i]->addConnection(people.back());\n people[i]->addConnection(people.back());\n    }\n    course_offer_id = 0;\n}\n\nvoid University::addMajor(string id, string name) {\n    majors.push_back(new Major(id, name));\n}\n\nvoid University::addStudent(string id, string name, Major* major, int semester, string password) {\n    people.push_back(new Student(id, name, major, semester, password));\n}\n\nvoid University::addCourse(string id, string name, int credit, int prerequisite, vector<string> majors_id) {\n    courses.push_back(new Course(id, name, credit, prerequisite, majors_id));\n}\n\nvoid University::addProfessor(string id, string name, Major* major, string string_position, string password) {\n    people.push_back(new Professor(id, name, major, string_position, password));\n}\n\nvoid University::catchError(runtime_error& ex) {\n    output.push_back(string(ex.what()) + \"\\n\");\n}\n\nbool University::checkValidPassword(string id, string password) {\n    for(int i = 0; i < people.size(); i++) {\n        if(people[i]->getId() == id and people[i]->getPassword() == password) {\n            return true;\n        }\n    }\n    return false;\n}\n\nbool University::isStudent() {\n    if(user->getPeopleType() == _STUDENT) {\n        return true;\n    }\n    else {\n        return false;\n    }\n}\n\nbool University::checkValidPostNumber(string post_id) {\n    if(!isNumber(post_id)) {\n        return false;\n    }\n    return user->isInPost(stoi(post_id));\n}\n\nbool University::checkLogin() {\n    if(user != nullptr) {\n        return true;\n    }\n    else {\n        return false;\n    }\n}\n\nbool University::isFloatId(string id) {\n    for(char c : id) {\n        if(c == DOT) {\n            return true;\n        }\n    }\n    return false;\n}\n\nbool University::checkValidId(string id) {\n    for(int i = 0; i < people.size(); i++) {\n        if(people[i]->getId() == id) {\n            return true;\n        }\n    }\n    return false;\n}\n\nbool University::checkValidCourse(string id) {\n    for(int i = 0; i < courses.size(); i++) {\n        if(courses[i]->getId() == id) {\n            return true;\n        }\n    }\n    return false;\n}\n\nbool University::isProfessor(string id) {\n    for(int i = 0; i < people.size(); i++) {\n        if(people[i]->getPeopleType() == _PROFESSOR and people[i]->getId() == id) {\n            return true;\n        }\n    }\n    return false;\n}\n\nint University::findPeopleIndexById(string id) {\n    for(int i = 0; i < people.size(); i++) {\n        if(people[i]->getId() == id) {\n            return i;\n        }\n    }\n}\n\nbool University::checkValidPostNumberById(string post_id, string id) {\n    int index = findPeopleIndexById(id);\n    return people[index]->isInPost(stoi(post_id));\n}\n\nbool University::inCommonTime(string professor_id, string time) {\n    int professor_index = findPeopleIndexById(professor_id);\n    Time new_time(time);\n    if(people[professor_index]->validCourseTime(new_time)) {\n        return false;\n    }\n    else {\n        return true;\n    }\n\n}\n\nint University::findMajor(string id) {\n    for(int i = 0; i < majors.size(); i++) {\n        if(majors[i]->getId() == id) {\n            return i;\n        }\n    }\n}\n\nint University::findCourseIndexById(string id) {\n    for(int i = 0; i < courses.size(); i++) {\n        if(courses[i]->getId() == id) {\n            return i;\n        }\n    }\n}\n\nbool University::isPresentByProfessor(string professor_id, string course_id) {\n    int professor_index = findPeopleIndexById(professor_id);\n    int course_index = findCourseIndexById(course_id);\n    return courses[course_index]->hasMajor(people[professor_index]->getMajorId());\n}\n\nvoid University::showOneCourseOffers(int index) {\n    output.push_back(to_string(all_course_offers[index]->getCourseOfferId()) + SPACE);\n    output.push_back(all_course_offers[index]->getName() + SPACE);\n    output.push_back(to_string(all_course_offers[index]->getCapacity()) + SPACE);\n    output.push_back(people[findPeopleIndexById(all_course_offers[index]->getProfessorId())]->getName() + SPACE);\n    output.push_back(all_course_offers[index]->getTime()  + SPACE);\n    output.push_back(all_course_offers[index]->getExamTime() + SPACE);\n    output.push_back(to_string(all_course_offers[index]->getClassNumber()) + \"\\n\");\n\n}\n\nvoid University::showAllCourseOffers() {\n    for(int i = 0; i < all_course_offers.size(); i++) {\n        output.push_back(to_string(all_course_offers[i]->getCourseOfferId()) + SPACE);\n        output.push_back(all_course_offers[i]->getName()  + SPACE);\n        output.push_back(to_string(all_course_offers[i]->getCapacity()) + SPACE);\n        output.push_back(people[findPeopleIndexById(all_course_offers[i]->getProfessorId())]->getName() + \"\\n\");\n    }\n}\n\nMajor* University::getMajorById(int index) {\n    return majors[index];\n}\n\nvoid University::handlePostRequest() {\n    if(input_line[1] == LITTLE_POST) {\n        runSharePost();\n    }\n    else if(input_line[1] == LOGIN) {\n        runLogin();\n    }\n    else if(input_line[1] == LOGOUT) {\n        runLogout();\n    }\n    else if(input_line[1] == CONNECT) {\n        runConnect();\n    }\n    else if(input_line[1] == COURSE_OFFER) {\n        runShareCourse();\n    }\n    else {\n        throw runtime_error(NOT_FOUND);\n    }\n}\n\nvoid University::handleGetRequest() {\n    if(input_line[1] == MY_COURSES) {\n        runGetMyCourse();\n    }\n    else if(input_line[1] == NOTIFICATION) {\n        runNotification();\n    }\n    else if(input_line[1] == LITTLE_POST) {\n        runGetPost();\n    }\n    else if(input_line[1] == PERSONAL_PAGE) {\n        runPersonalPage();\n    }\n    else if(input_line[1] == COURSES) {\n        runGetCourse();\n    }\n    else {\n        throw runtime_error(NOT_FOUND);\n    }\n\n}\n\nvoid University::handleDeleteRequest() {\n    if(input_line[1] == LITTLE_POST) {\n        runRemovePost();\n    }\n    else if(input_line[1] == MY_COURSES) {\n        runDeleteCourse();\n    }\n    else {\n        throw runtime_error(NOT_FOUND);\n    }\n}\n\nvoid University::handleInput() {\n    if(input_line[0] == GET) {\n        handleGetRequest();\n    }\n    else if(input_line[0] == POST) {\n        handlePostRequest();\n    }\n    else if(input_line[0] == PUT and input_line[1] == MY_COURSES) {\n        runPutCourse();\n    }\n    else if(input_line[0] == DELETE) {\n        handleDeleteRequest();\n    }\n    else {\n        throw runtime_error(BAD_REQUEST);\n    }\n}\n\nvoid University::run(string input_string) {\n    input_line = splitByInputSign(input_string, SPACE);\n    try {\n        if(input_line.size() > 2) {\n            handleInput();\n        }\n        else {\n            throw runtime_error(BAD_REQUEST);\n        }\n    } catch (runtime_error &e) {\n        catchError(e);\n    }\n}\n\n\n// POST course_offer ? course_id 1 professor_id 810420432 capacity 70 time Sunday:13-15 exam_date 1403/4/4 class_number 2\n// POST course_offer ? course_id 1 professor_id 810420432 capacity 40 time Saturday:13-15 exam_date 1403/4/4 class_number 2","filename":"/Users/mahdis/Desktop/AP/AP6/src/University.cpp","identifier":"Save Document","languageId":"cpp","version":153,"lineCount":264},"failed":true}