{"date":"2024-06-09T12:17:39.634Z","courseId":"17","assignment":"AP-Spring03-CA6-phase3","trace":{"version":33,"content":"#ifndef TEMPLATE_PARSER_HPP_INCLUDE\n#define TEMPLATE_PARSER_HPP_INCLUDE\n\n#include <cstring>\n#include <iostream>\n#include <map>\n#include <string>\n\n#include \"server.hpp\"\n#include \"request.hpp\"\n#include \"utilities.hpp\"\n\nnamespace SysCmd {\n#ifdef _WIN32\nconst std::string rm = \"del \";\nconst std::string programStart = \"\";\nconst std::string mkdir = \"mkdir \";\nconst std::string slash = \"\\\\\";\nconst std::string fileExtention = \".exe\";\n#else\nconst std::string rm = \"rm -f \";\nconst std::string programStart = \"./\";\nconst std::string mkdir = \"mkdir \";\nconst std::string slash = \"/\";\nconst std::string fileExtention = \".o\";\n#endif\n} // namespace SysCmd\n\nconst std::string beginCodeBlockTag = \"<%\";\nconst std::string endCodeBlockTag = \"%>\";\nconst std::string utilitiesHeaderPath = \"utils/utilities.hpp\";\nconst std::string utilitiesPath = \"utils/utilities.cpp\";\nconst std::string strutilsHeaderPath = \"utils/strutils.hpp\";\nconst std::string strutilsPath = \"utils/strutils.cpp\";\nconst std::string cc = \"g++ -std=c++11 -Wall -pedantic\";\nconst std::string compileDirectory = \"templateCompile\";\nconst std::string toCompileFile = \"compiled.cpp\";\nconst std::string staticTemplate = \"staticTemplate.html\";\nconst std::string outputFolder = \".template\";\nconst std::string mapFile = \"map.txt\";\nconst std::string localTemplate(const int parserNum);\n\nclass TemplateParser {\npublic:\n    TemplateParser(std::string _filePath);\n    ~TemplateParser();\n\n    std::string getHtml(std::map<std::string, std::string> _context);\n\nprivate:\n    class TemplateUtils {\n    public:\n        static void runSystemCommand(std::string command, std::string errorMessage);\n        static int writeMapToFile(std::string fname,\n                                  std::map<std::string, std::string>* m);\n    };\n\n    static int lastParserNum;\n    int parserNum;\n    std::string filePath;\n    std::string code;\n    std::map<std::string, std::string> context;\n    int variableCount;\n    std::string html;\n    std::string programName;\n\n    void parseTemplate();\n    int findBeginOfCodeBlock(int startPosition, std::string& unparsedTemplate);\n    int findEndOfCodeBlock(int startPosition, std::string& unparsedTemplate);\n    void appendHTMLToCode(int begin, int end, std::string const& html);\n    void appendCodeBlockToCode(int begin, int end, std::string& unparsedTemplate);\n    void generateCode();\n    void addIncludesToCode();\n    void addReadFromTemplateToCode();\n    void addReturnToCode();\n    void addContextMapToCode();\n    std::string runGeneratedCode();\n    void makeExecutableTemplate();\n    void makeLocalTemplate();\n    void compileCode();\n    void deleteExecutable();\n    void deleteLocalTemplate();\n};\n\n#endif // TEMPLATE_PARSER_HPP_INCLUDE\n","filename":"/Users/mahdis/Desktop/AP/AP6/include/template_parser.hpp","identifier":"Text Change","lineCount":86,"languageId":"cpp"},"failed":false}