{"date":"2024-06-09T20:30:34.212Z","courseId":"17","assignment":"AP-Spring03-CA6-phase3","trace":{"version":1185,"content":"#include \"handlers.hpp\"\n\nLoginHandler::LoginHandler(University *university): university(university) {}\nLogoutHandler::LogoutHandler(University *university): university(university) {}\n\n\nResponse* catchError(exception& e) {\n    if(e.what() == PERMISSION_DENIED) {\n        Response* res = Response::redirect(\"/permissionDenied\");\n        return res;\n    }\n    else if(e.what() == BAD_REQUEST) {\n        Response* res = Response::redirect(\"/badRequest\");\n        return res;\n    }\n    else if(e.what() == EMPTY) {\n        Response* res = Response::redirect(\"/empty\");\n        return res;\n    }\n    else {\n        Response* res = Response::redirect(\"/notFound\");\n        return res;\n    }\n}\n\nResponse* LoginHandler::callback(Request* req) {\n    try {\n        string username = req->getBodyParam(\"username\");\n        string password = req->getBodyParam(\"password\");\n        university->runLogin(username, password);\n        PeopleType people_type = university->peopleStatus();\n        if(people_type == _STUDENT) {\n            Response* res = Response::redirect(\"/student\");\n            res->setSessionId(\"SID\");\n            return res;\n        }\n        else if(people_type == _PROFESSOR) {\n            Response* res = Response::redirect(\"/professor\");\n            res->setSessionId(\"SID\");\n            return res;\n        }\n        else {\n            Response* res = Response::redirect(\"/ut_account\");\n            res->setSessionId(\"SID\");\n            return res;\n        }\n    }\n    catch (runtime_error& e) {\n        return catchError(e);\n    }\n}\n\nResponse* LogoutHandler::callback(Request* req) {\n    try {\n        string username = req->getBodyParam(\"username\");\n        string password = req->getBodyParam(\"password\");\n        Response* res;\n        university->runLogin(username, password);\n        PeopleType people_type = university->peopleStatus();\n        if(people_type == _STUDENT) {\n            Response* res = Response::redirect(\"/student\");\n            res->setSessionId(\"SID\");\n            return res;\n        }\n        else if(people_type == _PROFESSOR) {\n            Response* res = Response::redirect(\"/professor\");\n            res->setSessionId(\"SID\");\n            return res;\n        }\n        else {\n            Response* res = Response::redirect(\"/ut_account\");\n            res->setSessionId(\"SID\");\n            return res;\n        }\n    }\n    catch (runtime_error& e) {\n        return catchError(e);\n    }\n}","filename":"/Users/mahdis/Desktop/AP/AP6/code/src/handlers.cpp","identifier":"Text Change","lineCount":79,"languageId":"cpp"},"failed":false}