{"date":"2024-06-09T19:33:12.656Z","courseId":"17","assignment":"AP-Spring03-CA6-phase3","trace":{"version":750,"content":"#include \"handlers.hpp\"\n\nLoginHandler::LoginHandler(University *university): university(university) {}\n\nResponse* LoginHandler::callback(Request* req) {\n    try {\n        string username = req->getBodyParam(\"username\");\n        string password = req->getBodyParam(\"password\");\n        university->runLogin(username, password);\n        Response* res = Response::redirect(\"/rand\");\n        res->setSessionId(\"SID\");\n        return res;\n    }\n    catch (runtime_error& e) {\n        Response* res = new Response();\n        res->setHeader(\"Content-Type\", \"text/html\");\n        std::string body;\n\n        body += \"<form action=\\\"/login\\\" method=\\\"post\\\">\"\n        body += \"<input name=\\\"username\\\" type=\\\"text\\\" placeholder=\\\"Username\\\">\";\n\n        body += \"<!DOCTYPE html>\";\n        body += \"<html lang=\\\"en\\\">\";\n        body += \"<head>\";\n        body += \"<title>Random Number Page</title>\";\n        body += \"</head>\";\n        body += \"<body style=\\\"text-align: center;\\\">\";\n        body += \"<script>\";\n        body += \"alert(\\\"ERROR\\\");\";\n        body += \"</script>\";\n        body += \"</body>\";\n        body += \"</html>\";\n\n        res->setBody(body);\n        return res;\n\n        // if(e.what() == PERMISSION_DENIED) {\n        //     Response* res = Response::redirect(\"/permissionDenied\");\n        //     return res;\n        // }\n        // else if(e.what() == BAD_REQUEST) {\n        //     Response* res = Response::redirect(\"/badRequest\");\n        //     return res;\n        // }\n        // else if(e.what() == NOT_FOUND) {\n        //     Response* res = Response::redirect(\"/notFound\");\n        //     return res;\n        // }\n        // else if(e.what() == EMPTY) {\n        //     Response* res = Response::redirect(\"/empty\");\n        //     return res;\n        // }\n    }\n}","filename":"/Users/mahdis/Desktop/AP/AP6/code/src/handlers.cpp","identifier":"Text Change","lineCount":54,"languageId":"cpp"},"failed":false}